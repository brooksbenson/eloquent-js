!function(t){var e={};function s(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class r{constructor(t,e,s){this.level=t,this.actors=e,this.status=s}static start(t){return new r(t,t.actors,"playing")}get player(){return this.actors.find(t=>"player"==t.type)}}var o=r;class n{constructor(t,e){this.x=t,this.y=e}plus(t){return new n(this.x+t.x,this.y+t.y)}times(t){return new n(this.x*t,this.y*t)}}function i(t,e,...s){const r=document.createElement(t);for(let t of Object.keys(e))r.setAttribute(t,e[t]);for(let t of s)r.appendChild(t);return r}class c{constructor(t,e){this.pos=t,this.speed=e}get type(){return"player"}static create(t){return new c(t.plus(new n(0,-.5)),new n(0,0))}}c.prototype.size=new n(.8,1.5);class a{constructor(t,e,s){this.pos=t,this.speed=e,this.reset=s}get type(){return"lava"}static create(t,e){return"="==e?new a(t,new n(2,0)):"|"==e?new a(t,new n(0,2)):"v"==e?new a(t,new n(0,3),t):void 0}}a.prototype.size=new n(1,1);class l{constructor(t,e,s){this.pos=t,this.basePos=e,this.wobble=s}get type(){return"coin"}static create(t){let e=t.plus(new n(.2,.1));return new l(e,e,Math.random()*Math.PI*2)}}l.prototype.size=new n(.6,.6);const p={".":"empty","#":"wall","+":"lava","@":c,"=":a,"|":a,v:a,o:l};var h=class{constructor(t){const e=t.trim().split("\n").map(t=>[...t]);this.height=e.length,this.width=e[0].length,this.startActors=[],this.rows=e.map((t,e)=>t.map((t,s)=>{const r=p[t];return"string"==typeof r?r:(this.startActors.push(r.create(new n(s,e),t)),"empty")}))}};const u=20;class y{constructor(t,e){this.dom=i("div",{class:"game"},function(t){return i("table",{class:"background",style:`width: ${t.width*u}px`},...t.rows.map(t=>i("tr",{style:`height: ${u}px`},...t.map(t=>i("td",{class:t})))))}(e)),this.actorLayer=null,t.appendChild(this.dom)}clear(){this.dom.remove()}}y.prototype.syncState=function(t){this.actorLayer&&this.actorLayer.remove(),this.actorLayer=i("div",{},...t.actors.map(t=>{let e=i("div",{class:`actor ${t.type}`});return e.style.width=`${t.size.x*u}px`,e.style.height=`${t.size.y*u}px`,e.style.left=`${t.pos.x*u}px`,e.style.top=`${t.pos.y*u}px`,e})),this.dom.appendChild(this.actorLayer),this.dom.className="game "+t.status,this.scrollPlayerIntoView(t)},y.prototype.scrollPlayerIntoView=function(t){let e=this.dom.clientWidth,s=this.dom.clientHeight,r=e/3,o=this.dom.scrollLeft,n=o+e,i=this.dom.scrollTop,c=i+s,a=t.player,l=a.pos.plus(a.size.times(.5)).times(u);l.x<o+r?this.dom.scrollLeft=l.x-r:l.x>n-r&&(this.dom.scrollLeft=l.x+r-e),l.y<i+r?this.dom.scrollTop=l.y-r:l.y>c-r&&(this.dom.scrollTop=l.y+r-s)};var d=y;const m=new h("\n......................\n..#................#..\n..#..............=.#..\n..#.........o.o....#..\n..#.@......#####...#..\n..#####............#..\n......#++++++++++++#..\n......##############..\n......................");new d(document.body,m).syncState(o.start(m))}]);